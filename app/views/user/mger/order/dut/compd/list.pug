- let quantTotal = 0;
- let dutPrImp = 0;
table.mt-3.table.table-bordered
	thead.thead-light
		th 品牌
		th 系列
		th 产品规格
		th 工艺面料
		th(style="width:10%") 数量 | 采购价格
	thead
		tr
			td.text-right(colspan=4) 总价值:
			td
				h5.text-info
					span#span-dutPrImp
					span &nbsp;€
		each dutpd in dutpds
			- quantTotal += dutpd.quant;
			- dutPrImp += dutpd.quant * dutpd.dutPr;
			tr.text-info(id="tr-compdid-"+dutpd._id)
				td
					.pdnum.text-left.text-dark [#{dutpd.pdnum}]
					.brandnome.mt-5
						if dutpd.brand
							- brand = dutpd.brand;
							span [#{brand.nome}]
						else
							span 品牌数据丢失

					if dutpd.area
						-a;
						.pdarea.mt-3
							span.text-dark 区域: 
							span #{dutpd.area}
				td
					.pdnome
						span.text-dark 品类: 
						span #{dutpd.pdNome}
					if dutpd.pdfir
						- pdfir = dutpd.pdfir;
						.pdfircode.mt-3
							span.text-dark 系列名: 
							span [#{pdfir.code}]
					else
						- let firNome = '产品系列名称';
						if dutpd.firNome
							- firNome = dutpd.firNome;
						.firnome.mt-3
							span.text-dark 系列名: 
							span #{firNome}
					.photo.mt-3
						- let photo = "/imgs/createPicture.jpg";
						if dutpd.photo
							- photo = dutpd.photo;
							img(src=photo, width="120px")
							.picLink
								a(href=photo, target="_blank") <span class="oi oi-zoom-in"></span>
						else if dutpd.pdfir
							- photo = dutpd.pdfir.photo;
							img(src=photo, width="120px")
							.picLink
								a(href=photo, target="_blank") <span class="oi oi-zoom-in"></span>
						else
							img(src=photo, width="120px")
				td
					if dutpd.pdsec
						- pdsec = dutpd.pdsec;
						.pdseccode
							span.text-dark 产品编码: 
							span [#{pdsec.code}]
						.pdsecspec.mt-3
							span.text-dark 产品尺寸: 
							span [#{pdsec.spec}]
					else
						.pdseccode
							span.text-dark 产品编码: 
							span #{dutpd.secNome}
						.pdsecspec.mt-3
							span.text-dark 产品尺寸: 
							span #{dutpd.specf}

					.sketch.mt-3
						- let sketch = "/imgs/createPicture.jpg";
						if dutpd.sketch
							- sketch = dutpd.sketch;
							img#sketchCrt(src=sketch, width="120px")
							.picLink
								a(href=sketch, target="_blank") <span class="oi oi-zoom-in"></span>
						else if dutpd.pdsec
							-a;
							- sketch = dutpd.pdsec.photo;
							img#sketchCrt(src=sketch, width="120px")
							.picLink
								a(href=sketch, target="_blank") <span class="oi oi-zoom-in"></span>
						else
							img#sketchCrt(src=sketch, width="120px")
				td
					- let pdthdcode = '查找数据库';
					if dutpd.pdthd
						- pdthdcode = '['+dutpd.pdthd.code+']';
					.pdthdcode #{pdthdcode}
					.pdmater.mt-3 #{dutpd.mater}
					.pdcraft.mt-3 #{dutpd.craft}
					.images
						- let subsp = -1;
						each image in dutpd.images
							- subsp++;
							if image && image.length > 5
								-a;
								img.mt-2(src=image, width="120px")
								.picLink
									a(href=image, target="_blank") <span class="oi oi-zoom-in"></span>
				td
					.quant
						span.text-dark 数量: 
						span #{dutpd.quant}
					.dutPr.mt-3.text-left
						.text-dark 采购单价:
						if dutpd.dutPr && !isNaN(dutpd.dutPr)
							-a;
							.text-warning #{(dutpd.dutPr).toFixed(2)} €
							.text-dark.mt-2 总价:
							.text-warning #{(dutpd.dutPr * dutpd.quant).toFixed(2)} €
						else
							span.text-danger 未填写

.hideImp
	input#ipt-quantTotal(type="hidden", value=quantTotal)
	input#ipt-dutPrImp(type="hidden", value=dutPrImp)