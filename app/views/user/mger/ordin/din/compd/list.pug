.dinpds.mt-5
	each dinpd in dinpds
		- a;
		.row.py-2.mt-2.text-center.border.dinpdCard
			.col-4.col-md-2.mt-2(class="dinpd-"+dinpd._id)
				if dinpd.brand
					- brand = dinpd.brand;
					.text-dark [#{brand.nome}]
				else
					.text-muted #{dinpd.brandNome}
				//- if din.status == Conf.status.init.num
						a-;
						a.btn.btn-info.mt-5(href="/mgDinpd/"+dinpd._id) 查看详情
			.col-4.col-md-2.mt-2
				if dinpd.pdfir
					- pdfir = dinpd.pdfir;
					div [#{pdfir.code}]
					a(href=pdfir.photo, target="_blank")
						img(src=pdfir.photo, width="100%")
				else
					div 数据丢失
			.col-4.col-md-2.mt-2
				if dinpd.pdsec
					- pdsec = dinpd.pdsec;
					div [#{pdsec.code}]
					div [#{pdsec.spec}]
					a(href=pdsec.photo, target="_blank")
						img(src=pdsec.photo, width="100%")
				else
					div 数据丢失
			.col-4.col-md-2.mt-2
				if dinpd.pdthd
					- pdthd = dinpd.pdthd;
					div [#{pdthd.code}]
					each mater in dinpd.pdthd.maters
						-a;
						.text-dark.mt-2 #{mater}
				else
					div 数据丢失
			.col-4.col-md-3.mt-2
				.quant 数量: #{dinpd.quant}

				if dinpd.price
					- price = dinpd.price;
					.price 报价单价: #{dinpd.price}
				else
					.price.text-warning  未报价
				- let total = dinpd.quant * dinpd.price;
				if !isNaN(total)
					- total;
					strong.total 报价总价: #{total}
				.dinPr.mt-3
					span 销售单价: 
					span.dinpdUpClick(id="dinPr-"+dinpd._id+"-span")
						if dinpd.dinPr
							-a;
							span.text-info #{dinpd.dinPr}
						else
							span.text-warning 填写售价
					input(id="quant-"+dinpd._id, type="hidden", value=dinpd.quant)
					input(id="price-"+dinpd._id, type="hidden", value=dinpd.price)
					input.dinPrIpt(id="dinPr-"+dinpd._id+"-org", type="hidden", value=dinpd.dinPr)
					form(id="dinPr-"+dinpd._id+"-form", action="/mgDinpdUpdAjax", style="display:none")
						input(type="hidden", name="obj[_id]", value=dinpd._id)
						.form-group.row
							.col-12
								input.dinpdUpIpt.form-control(id="dinPr-"+dinpd._id+"-ipt", type="text", name="obj[dinPr]", placeholder="采购价格", autocomplete="off", value=din.dinPr)
				.text-danger(id="dinPrOpt-"+dinpd._id)
				strong
					span 销售总价: 
					span(id="dinPrTot-"+dinpd._id) #{dinpd.quant * dinpd.dinPr}
			.col-4.col-md-1.mt-2
				.strmup.mb-4
					if dinpd.strmup
						-a;
						span #{dinpd.strmup.nome}
					else
						span 数据丢失
				.cter.mb-4
					if dinpd.cter
						-a;
						span #{dinpd.cter.nome}[#{dinpd.cter.code}]
					else
						span 数据丢失
				- let status = '';
				each sts in Conf.status
					- status = '';
					if sts.num == dinpd.dinpdSts
						- status = sts.val;
						- break;
				div #{status}

script(src="/js/user/sler/din/compd/list.js")