.border.border-dark.p-3
	.row.text-center
		.col-md-6
			h5.code 订单号: #{din.dateCd}#{din.code}
			.time.mt-2
				span 下单时间: 
				span #{moment(din.dinAt).format('DD/MM/YYYY')}
			.din.mt-2
				span 销售员:
				if din.diner
					- diner = din.diner;
					span #{diner.nome} [ #{diner.code} ]
				else
					span 数据丢失
		.col-md-6
			.cterNome 客户姓名 #{din.cterNome}
			.cter 客户:
				if din.cter
					- cter = din.cter;
					span.text-info.ordinUpClick#cter-span #{cter.nome} [#{cter.code}]
				else
					span.text-info.ordinUpClick#cter-span 未分配
				form#cter-form(method="post", action="/mgDinUpd", enctype="multipart/form-data", style="display:none")
					input(type="hidden", name="obj[_id]", value=din._id)
					.form-group.row.px-5.text-center
						.col-12
							select.inquotUpSel#dinNote-ipt.form-control(name="obj[cter]", data-style="btn-info")
								option(value='null') 请选择客户
								each cter in cters
									-a;
									if !din.cter
										-a;
										option(value=cter._id) #{cter.nome}[#{cter.code}]
									else if String(cter._id) == String(din.cter._id)
										-a;
										option(value=cter._id, selected="selected") #{cter.nome}[#{cter.code}]
									else
										option(value=cter._id) #{cter.nome}[#{cter.code}]
					.form-group.row
						.col-6
							button.inquotCancelClick#cter-cancel.btn.btn-secondary(type="button") 取消
						.col-6
							input.btn.btn-success(type="submit" value="提交")
			.status
				- let status = '';
				each sts in Conf.status
					- status = '';
					if sts.num == din.status
						- status = sts.val;
						- break;
				span 状态: #{status}
			.excel.text-right
				a(href="/slDinExcel/"+din._id) Excel <span class="oi oi-data-transfer-download"></span>

	.statusChange.mt-3.text-center.row
		if din.status == Conf.status.unpaid.num
			-a;
			.col-6
				button.btn.btn-danger.delObjectBtn(type="button") 重新处理
				.delObject(style="display:none")
					a.mx-4.my-2.btn.btn-danger(href="/mgDinDel/"+din._id) 确定
					button.mx-4.my-2.delObjectCancel.border.border-danger.text-danger.btn.btn-default(type="button") 取消
			.col-6
				if din.bills && din.bills.length > 0
					- a;
					button.btn.btn-warning.changeStsAjax(id="changeStsAjax-"+din._id+"-deposit", type="button", data-url="/usOrdinStatusAjax", data-id=din._id, data-stsf=din.status, data-stst=Conf.status.deposit.num) 开始生产
		else if din.status == Conf.status.deposit.num
			-a;
			.col-6
				button.btn.border-danger.text-danger.changeStsAjax(id="changeStsAjax-"+din._id+"-unpaid", type="button", data-url="/usOrdinStatusAjax", data-id=din._id, data-stsf=din.status, data-stst=Conf.status.unpaid.num) 返回未付款
			.col-6
				button.btn.btn-warning.changeStsAjax(id="changeStsAjax-"+din._id+"-payoff", type="button", data-url="/usOrdinStatusAjax", data-id=din._id, data-stsf=din.status, data-stst=Conf.status.payoff.num) 已收到全款
		else if din.status == Conf.status.payoff.num
			-a;
			.col-6
				button.btn.border-danger.text-danger.changeStsAjax(id="changeStsAjax-"+din._id+"-deposit", type="button", data-url="/usOrdinStatusAjax", data-id=din._id, data-stsf=din.status, data-stst=Conf.status.deposit.num) 返回未付清
			.col-6
				button.btn.btn-warning.changeStsAjax(id="changeStsAjax-"+din._id+"-done", type="button", data-url="/usOrdinStatusAjax", data-id=din._id, data-stsf=din.status, data-stst=Conf.status.done.num) 订单完成
		else if din.status == Conf.status.done.num
			-a;
			.col-6
				button.btn.border-danger.text-danger.changeStsAjax(id="changeStsAjax-"+din._id+"-payoff", type="button", data-url="/usOrdinStatusAjax", data-id=din._id, data-stsf=din.status, data-stst=Conf.status.payoff.num) 返回发货
			.col-6

script(src="/js/user/mger/din/detail/basicInfo.js")
script(src="/js/user/ajaxChange/status.js")